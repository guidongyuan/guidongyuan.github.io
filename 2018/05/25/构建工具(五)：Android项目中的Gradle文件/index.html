<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="构建工具,Maven," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="一开始先进行Gradle和Maven的对比，然后，对Gradle，Gradle Wrapper，Android Plugin for Gradle的一些概念进行区分，最后通过分析Android项目中的各个Gradle文件。">
<meta name="keywords" content="构建工具,Maven">
<meta property="og:type" content="article">
<meta property="og:title" content="构建工具(五)：Android项目中的Gradle文件">
<meta property="og:url" content="http://yoursite.com/2018/05/25/构建工具(五)：Android项目中的Gradle文件/index.html">
<meta property="og:site_name" content="亦袁非猿">
<meta property="og:description" content="一开始先进行Gradle和Maven的对比，然后，对Gradle，Gradle Wrapper，Android Plugin for Gradle的一些概念进行区分，最后通过分析Android项目中的各个Gradle文件。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://ol45hsxko.bkt.clouddn.com/2018-04-30-15250602286403.jpg-wtmark">
<meta property="og:image" content="http://ol45hsxko.bkt.clouddn.com/2018-04-30-15250479303456.jpg-wtmark">
<meta property="og:updated_time" content="2018-06-24T07:35:06.553Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="构建工具(五)：Android项目中的Gradle文件">
<meta name="twitter:description" content="一开始先进行Gradle和Maven的对比，然后，对Gradle，Gradle Wrapper，Android Plugin for Gradle的一些概念进行区分，最后通过分析Android项目中的各个Gradle文件。">
<meta name="twitter:image" content="http://ol45hsxko.bkt.clouddn.com/2018-04-30-15250602286403.jpg-wtmark">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'OF78IO15IZ',
      apiKey: '75e8a500a6a0237315a8a25669328dbf',
      indexName: 'First Index',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/05/25/构建工具(五)：Android项目中的Gradle文件/"/>





  <title>构建工具(五)：Android项目中的Gradle文件 | 亦袁非猿</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">亦袁非猿</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            时间轴
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/25/构建工具(五)：Android项目中的Gradle文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="亦袁非猿">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oiduu4gde.bkt.clouddn.com/github%E5%A4%B4%E5%83%8F.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="亦袁非猿">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                构建工具(五)：Android项目中的Gradle文件
              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-25T06:17:38+08:00">
                2018-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/构建工具/" itemprop="url" rel="index">
                    <span itemprop="name">构建工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/05/25/构建工具(五)：Android项目中的Gradle文件/" class="leancloud_visitors" data-flag-title="构建工具(五)：Android项目中的Gradle文件">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>一开始先进行Gradle和Maven的对比，然后，对Gradle，Gradle Wrapper，Android Plugin for Gradle的一些概念进行区分，最后通过分析Android项目中的各个Gradle文件。</p>
</blockquote>
<a id="more"></a>
<h2 id="Gradle文件介绍"><a href="#Gradle文件介绍" class="headerlink" title="Gradle文件介绍"></a>Gradle文件介绍</h2><p>主角Gradle终于上场了，在Google发布的Android Studio开发工具中，Gradle替换Eclipse锁使用的ant作为默认的Android构建工具，其吸纳了ant和Maven的优点。现在ant几乎销声匿迹，Maven也日薄西山，而Gradle的发展却如日中天。感觉大多数场景，Gradle替换Maven的趋势，指日可待了。</p>
<h3 id="Gradle与Maven对比"><a href="#Gradle与Maven对比" class="headerlink" title="Gradle与Maven对比"></a>Gradle与Maven对比</h3><p><strong>那为啥前面还要花了几章简述Maven?</strong></p>
<ul>
<li>通过Maven介绍一下，什么是构建工具，有什么作用。</li>
<li>Gradle是在Maven上发展起来的，兼容Maven，只有知己知彼，才能更好体验Gradle的优势</li>
<li>一些非Android项目或者老的项目还使用到Maven。</li>
</ul>
<p>Maven和Gradl直观上最大的区别，就是依赖管理的写法，由于Gradle本身是基于Groovy脚本语音进行构建的，并通过DSL进行描述和控制构建逻辑，书写起来更加自由。抛弃了Maven的xml格式的繁琐写法。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.android.support<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>appcompat-v7<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">version</span>&gt;</span>26.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  compile <span class="string">'com.android.support:appcompat-v7:26.+'</span></span><br><span class="line">  testCompile <span class="string">'junit:junit:4.11'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Gradle比Maven不仅仅只是语法上的改变，还有</p>
<ul>
<li>性能方面得到很大提升</li>
<li>构建周期没有限制太死，比较灵活</li>
<li>依赖范围被简化</li>
<li>支持版本号后面使用+号实现动态的版本管理</li>
<li>解决冲突更加明确</li>
<li>……</li>
</ul>
<p>详细区别，可以参考最后的参考资料</p>
<h3 id="Android项目中的Gradle文件"><a href="#Android项目中的Gradle文件" class="headerlink" title="Android项目中的Gradle文件"></a>Android项目中的Gradle文件</h3><h4 id="Gradle，Gradle-Wrapper，Android-Plugin-for-Gradle区别"><a href="#Gradle，Gradle-Wrapper，Android-Plugin-for-Gradle区别" class="headerlink" title="Gradle，Gradle Wrapper，Android Plugin for Gradle区别"></a>Gradle，Gradle Wrapper，Android Plugin for Gradle区别</h4><p>在对Android Studio项目中关于gradle文件的介绍之前，先对几个概念进行介绍，在开发中，经常会遇到，尤其是更新Android Studio的时候。</p>
<h5 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h5><p>与Maven一样，是项目管理工具，上几篇文章对其与Maven都做了简单介绍。</p>
<h5 id="Gradle-Wrapper"><a href="#Gradle-Wrapper" class="headerlink" title="Gradle Wrapper"></a>Gradle Wrapper</h5><p>翻译过来名称是Gradle的包装，其实就是对Gradle进行封装，简化了Gradle本身的安装，部署。不同的开发者，不同的项目，有可能会采用不同版本的Gradle，如果每次切换一个项目，都要手动部署一下对应版本的Gradle，这种麻烦的事肯定不适合程序员，于是就通过Gradle Wrapper实现，就算本地原来没有安装部署Gradle的环境，也可以直接使用。</p>
<h6 id="查看Gradle版本"><a href="#查看Gradle版本" class="headerlink" title="查看Gradle版本"></a>查看Gradle版本</h6><p>在项目路径下，通过<figure class="highlight plain"><figcaption><span>-v```可以查看当前项目的Gradle版本，取决于```gradle-wrpper.properties```中的值。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```xml</span><br><span class="line">➜  StudyTest ./gradlew -v</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Gradle 4.1</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">Build time:   2017-08-07 14:38:48 UTC</span><br><span class="line">Revision:     941559e020f6c357ebb08d5c67acdb858a3defc2</span><br><span class="line"></span><br><span class="line">Groovy:       2.4.11</span><br><span class="line">Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015</span><br><span class="line">JVM:          1.8.0_112 (Oracle Corporation 25.112-b16)</span><br><span class="line">OS:           Mac OS X 10.13.3 x86_64</span><br></pre></td></tr></table></figure></p>
<h5 id="Android-Plugin-for-Gradle"><a href="#Android-Plugin-for-Gradle" class="headerlink" title="Android Plugin for Gradle"></a>Android Plugin for Gradle</h5><p>Android项目针对Gradle的插件，通过它就可以在Android项目中使用Gradle了。Android官方也对其进行了说明</p>
<blockquote>
<p>The Android Studio build system is based on Gradle, and the Android plugin for Gradle adds several features that are specific to building Android apps. Although the Android plugin is typically updated in lock-step with Android Studio, the plugin (and the rest of the Gradle system) can run independent of Android Studio and be updated separately.</p>
<p>大体的意思就是：Android Plugin for Gradle插件添加了构建Android项目的几项功能，虽然其通常与Anroid Studio锁定更新，但是可以独立于Android Studio运行并且单独更新。</p>
</blockquote>
<h6 id="Gradle插件版本与Gradle版本"><a href="#Gradle插件版本与Gradle版本" class="headerlink" title="Gradle插件版本与Gradle版本"></a>Gradle插件版本与Gradle版本</h6><p>Android Plugin for Gradle版本，Android Studio版本与Gradle版本是有联系的。如果你升级了Android Studio的时候，有可能会收到提示对其进行更新。尽量升级到最新版本，性能更好。目前Plugin和Gradle的版本搭配如下，可以通过<a href="https://developer.android.com/studio/releases/gradle-plugin" target="_blank" rel="noopener">Android官网Gradle Plugin介绍</a>进行查询<br><img src="http://ol45hsxko.bkt.clouddn.com/2018-04-30-15250602286403.jpg-wtmark" alt=""></p>
<h6 id="查看Gradle插件版本"><a href="#查看Gradle插件版本" class="headerlink" title="查看Gradle插件版本"></a>查看Gradle插件版本</h6><p>Android Studio 3.0 之前：<a href="https://jcenter.bintray.com/com/android/tools/build/gradle/" target="_blank" rel="noopener">jcenter仓库</a></p>
<p>Android Studio 3.0 之后：<a href="https://dl.google.com/dl/android/maven2/index.html" target="_blank" rel="noopener">Google仓库</a></p>
<h4 id="Android项目中的Gradle"><a href="#Android项目中的Gradle" class="headerlink" title="Android项目中的Gradle"></a>Android项目中的Gradle</h4><p>创建一个新的Android项目，可以看到这里有4处关于gradle的配置文件</p>
<p><img src="http://ol45hsxko.bkt.clouddn.com/2018-04-30-15250479303456.jpg-wtmark" alt=""></p>
<h5 id="app-build-gradle"><a href="#app-build-gradle" class="headerlink" title="app/build.gradle"></a>app/build.gradle</h5><p>app的gradle配置文件，关于该应用的配置几乎都在这个文件中，平时关注最多的也是这个文件。包含编译的SDK版本，不同编译类型的配置，项目依赖等。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 描述Gradle所引入的插件类型，表示是一个Android Application</span></span><br><span class="line">apply <span class="string">plugin:</span> <span class="string">'com.android.application'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 描述这个是Android module构建过程中的各个参数</span></span><br><span class="line">android &#123;</span><br><span class="line">  	<span class="comment">// 编译构建工具SDK版本</span></span><br><span class="line">    compileSdkVersion <span class="number">26</span></span><br><span class="line">  	<span class="comment">// 当前module的坐标</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        <span class="comment">// 在这里定义了项目的包名，之前在Eclipse中，是在AndroidManifest中的，现在改在该文件中。</span></span><br><span class="line">        applicationId <span class="string">"com.guidongyuan.studytest"</span></span><br><span class="line">        <span class="comment">// 支持最小SDK版本，则表示编译完成好的app，在SDK 15以下不能运行。</span></span><br><span class="line">        minSdkVersion <span class="number">15</span></span><br><span class="line">        <span class="comment">// 目标SDK版本(建议版本)</span></span><br><span class="line">        targetSdkVersion <span class="number">26</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 编译类型，可以在此处，对不同编译类型，如release(正式版)，debug(测试版)进行配置</span></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            <span class="comment">// 是否混淆(false:不混淆)</span></span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            <span class="comment">// 混淆规则的配置文件</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 项目的所有依赖库</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// 本地依赖声明，包含libs文件下的所有jar文件</span></span><br><span class="line">    implementation fileTree(<span class="string">dir:</span> <span class="string">'libs'</span>, <span class="string">include:</span> [<span class="string">'*.jar'</span>])</span><br><span class="line">    <span class="comment">// 远程依赖声明</span></span><br><span class="line">    implementation <span class="string">'com.android.support:appcompat-v7:26.1.0'</span></span><br><span class="line">    implementation <span class="string">'com.android.support.constraint:constraint-layout:1.1.0'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test:runner:1.0.1'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test.espresso:espresso-core:3.0.1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="gralde-wrapper-gradle-wrapper-properties"><a href="#gralde-wrapper-gradle-wrapper-properties" class="headerlink" title="gralde/wrapper/gradle-wrapper.properties"></a>gralde/wrapper/gradle-wrapper.properties</h5><p>定义Gradle Wrapper的一些信息，请求下载的路径，版本号，以及本地存放的位置。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#Mon Apr 30 08:59:50 CST 2018</span><br><span class="line"><span class="comment">// 解压gradle-xxx.zip文件后的存放地址，distributionPath是distributionBase的子目录</span></span><br><span class="line">distributionBase=GRADLE_USER_HOME</span><br><span class="line">distributionPath=wrapper/dists</span><br><span class="line"><span class="comment">// 下载的gradle-xxx.zip文件的存放地址，zipStorePath是zipStoreBase的子目录</span></span><br><span class="line">zipStoreBase=GRADLE_USER_HOME</span><br><span class="line">zipStorePath=wrapper/dists</span><br><span class="line"><span class="comment">// gradle下载的路径以及版本号</span></span><br><span class="line">distributionUrl=https\:<span class="comment">//services.gradle.org/distributions/gradle-4.1-all.zip</span></span><br></pre></td></tr></table></figure>
<p><strong>GRADLE_USER_HOME：</strong>用户的gradle目录，mac下的路径如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">另外，Android Studio默认也带有gradle，路径为```/Applications/Android Studio.app/Contents/gradle/gradle-4.1```。</span><br><span class="line"></span><br><span class="line">###### 离线导入gradle wrapper</span><br><span class="line"></span><br><span class="line">以前开始接触Android Studio最常遇到的问题，导入项目卡在下载Gradle Wrapper，解决办法：</span><br><span class="line"></span><br><span class="line">* 修改项目的gralde-wrapper版本为本地已经有的。</span><br><span class="line"></span><br><span class="line">* 自行在[Gradle Wrapper官网](https://services.gradle.org/distributions/)下载放进去，先运行一下，然后会生成指定目录，直接放在该路径就可以了。</span><br><span class="line"></span><br><span class="line">下图为把gradle-wrapper改为4.7生成的文件夹，直接把下载好的文件放到4cret……文件夹内(根据distribution url路径字符串计算md5值得来的)就可以了。</span><br><span class="line"></span><br><span class="line">![](http://ol45hsxko.bkt.clouddn.com/2018-05-01-15251360478203.jpg-wtmark)</span><br><span class="line"></span><br><span class="line">###### 使用本地Gradle Wrapper</span><br><span class="line"></span><br><span class="line">![](http://ol45hsxko.bkt.clouddn.com/2018-05-01-15251363375403.jpg-wtmark)</span><br><span class="line"></span><br><span class="line">如果使用Use Default gradle wrapper则会使用gradl-wrapper.properties中定义的版本，在开发中，一般勾选Use local gradle distribution使用本地的，并且设置为Offline work，可以提高编译速度。</span><br><span class="line"></span><br><span class="line">##### build.gradle</span><br><span class="line"></span><br><span class="line">整个项目的gradle配置文件，定义依赖仓库的地址</span><br><span class="line"></span><br><span class="line">```groovy</span><br><span class="line">buildscript &#123;</span><br><span class="line">    // 仓库</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">    // 依赖库</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        // 声明gradle插件的版本</span><br><span class="line">        classpath &apos;com.android.tools.build:gradle:3.0.1&apos;</span><br><span class="line">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class="line">        // in the individual module build.gradle files</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// gradle的一个task，执行clean的时候，会删除编译路径下的文件</span><br><span class="line">task clean(type: Delete) &#123;</span><br><span class="line">    delete rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="gradle-properties"><a href="#gradle-properties" class="headerlink" title="gradle.properties"></a>gradle.properties</h5><p>在该文件夹定义设计gradle相关的一些属性。在使用gradle的task时候，经常会在此定义一些全局变量，然后直接去调用。</p>
<h5 id="settings-gradle"><a href="#settings-gradle" class="headerlink" title="settings.gradle"></a>settings.gradle</h5><p>声明整个项目中需要gralde的module</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include <span class="string">':app'</span></span><br></pre></td></tr></table></figure>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><strong>Maven与Gradle对比</strong></p>
<ul>
<li><a href="https://gradle.org/maven-vs-gradle/" target="_blank" rel="noopener">Gradle官网：Gradle vs Maven</a></li>
<li><a href="http://www.cnblogs.com/huang0925/p/5209563.html" target="_blank" rel="noopener">Maven和Gradle对比</a></li>
<li><a href="https://www.tianmaying.com/tutorial/Gradle" target="_blank" rel="noopener">Gradle相对于Maven的优势</a></li>
</ul>
<p><strong>Android</strong></p>
<ul>
<li><a href="https://developer.android.com/studio/releases/gradle-plugin" target="_blank" rel="noopener">Android官网Gradle Plugin介绍</a></li>
<li><a href="http://stormzhang.com/android/2016/07/02/gradle-for-android-beginners/" target="_blank" rel="noopener">给 ANDROID 初学者的 GRADLE 知识普及</a></li>
<li><a href="https://blog.csdn.net/u013553529/article/details/55011602" target="_blank" rel="noopener">gradle-wrapper.properties中各属性的含义</a></li>
<li><a href="http://www.cnblogs.com/jiangxinnju/p/8229129.html" target="_blank" rel="noopener">彻底搞懂Gradle、Gradle Wrapper与Android Plugin for Gradle的区别和联系</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/构建工具/" rel="tag"># 构建工具</a>
          
            <a href="/tags/Maven/" rel="tag"># Maven</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/17/我们一起学ReactNative(三)：JavaScript语法基础/" rel="next" title="我们一起学ReactNative(三)：JavaScript语法基础">
                <i class="fa fa-chevron-left"></i> 我们一起学ReactNative(三)：JavaScript语法基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/14/我们一起学ReactNative(四)：原有Android项目引入ReactNative/" rel="prev" title="我们一起学ReactNative(四)：原有Android项目引入ReactNative">
                我们一起学ReactNative(四)：原有Android项目引入ReactNative <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQzOC82MDA2"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://oiduu4gde.bkt.clouddn.com/github%E5%A4%B4%E5%83%8F.jpeg"
               alt="亦袁非猿" />
          <p class="site-author-name" itemprop="name">亦袁非猿</p>
           
              <p class="site-description motion-element" itemprop="description">while(写出来){  <br>
  理解力++; <br>
  表达力++; }
</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gradle文件介绍"><span class="nav-number">1.</span> <span class="nav-text">Gradle文件介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Gradle与Maven对比"><span class="nav-number">1.1.</span> <span class="nav-text">Gradle与Maven对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Android项目中的Gradle文件"><span class="nav-number">1.2.</span> <span class="nav-text">Android项目中的Gradle文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Gradle，Gradle-Wrapper，Android-Plugin-for-Gradle区别"><span class="nav-number">1.2.1.</span> <span class="nav-text">Gradle，Gradle Wrapper，Android Plugin for Gradle区别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Gradle"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">Gradle</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Gradle-Wrapper"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">Gradle Wrapper</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#查看Gradle版本"><span class="nav-number">1.2.1.2.1.</span> <span class="nav-text">查看Gradle版本</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Android-Plugin-for-Gradle"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">Android Plugin for Gradle</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Gradle插件版本与Gradle版本"><span class="nav-number">1.2.1.3.1.</span> <span class="nav-text">Gradle插件版本与Gradle版本</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#查看Gradle插件版本"><span class="nav-number">1.2.1.3.2.</span> <span class="nav-text">查看Gradle插件版本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Android项目中的Gradle"><span class="nav-number">1.2.2.</span> <span class="nav-text">Android项目中的Gradle</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#app-build-gradle"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">app/build.gradle</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#gralde-wrapper-gradle-wrapper-properties"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">gralde/wrapper/gradle-wrapper.properties</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#gradle-properties"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">gradle.properties</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#settings-gradle"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">settings.gradle</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考资料"><span class="nav-number">1.3.</span> <span class="nav-text">参考资料</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">亦袁非猿</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>
<p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  






  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Ivcwx7f8x7ghc8SWU0YMuIFI-gzGzoHsz", "mQEm0lIov3tBcrPByox6zHc0");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

</body>
</html>
